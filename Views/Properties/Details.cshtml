@model Airbnb_PWEB.Models.Property

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Property</h4>
    <hr />
    @foreach(var image in Model.Images){
                    {
                    <img class="img-thumbnail" src="data:@image.FileType;base64,@Convert.ToBase64String(image.Data, 0, image.Data.Length)" style="width:250px;height:200px;" />
                    }
                }
<dl class="row">
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Category)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Category.Name)
    </dd>
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Tittle)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Tittle)
    </dd>
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Description)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Description)
    </dd>
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.pricePerNigth)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.pricePerNigth)
    </dd>
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Address)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Address)
    </dd>
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.City)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.City)
    </dd>
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Amenities)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Amenities)
    </dd>
</dl>

<div class="mapouter">
  <div class="gmap_canvas">
    <iframe
      width="100%"
      height="300"
      id="gmap_canvas"
      src=""
      frameborder="0"
      scrolling="no"
      marginheight="0"
      marginwidth="0"
    ></iframe>
    <style>
      .mapouter {
        position: relative;
        text-align: right;
        height: 300px;
        width: 100%;
      }
    </style>
    <style>
      .gmap_canvas {
        overflow: hidden;
        background: none !important;
        height: 300px;
        width: 100%;
      }
    </style>
  </div>
</div>
</div>
<div class="form-group">
    <a asp-controller="Evaluations"asp-action="ListComments" asp-route-id="@Model.Id">Ver Comentários sobre a Propriedade</a>
</div>
<div class="form-group">
    <a asp-controller="Reservations" asp-action="Create" asp-route-id ="@Model.Id">
    <input type="button" value="Verificar Disponibilidade" class="btn btn-primary"/>
    </a>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>

<script>
  function updateMap() {

    var address = '@Html.Raw(Model.Address)';

    document.getElementById("gmap_canvas").src =
      "https://maps.google.com/maps?q=" + address + "&t=&z=16&ie=UTF8&iwloc=&output=embed";
  }

  window.onload = updateMap;
</script>
